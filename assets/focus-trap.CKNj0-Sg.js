import{a4 as e,ak as t,al as a,am as n,an as o,ao as s,i as r,ap as l,a3 as u,p as i,n as c,ag as d,s as p,t as f,ad as v,ae as m,a9 as y,aq as h,u as b,af as g,ar as w,as as x,e as E,ah as O,q as S,w as I}from"./devibeans.BcKK_RWg.js";import{w as k,r as P,i as T,ab as C,e as F,f as L,ac as A,X as N,a3 as _,$ as R,az as z,aA as B,d as j,af as $,S as M,a0 as K,o as H,c as V,z as D,F as W,G as Q,u as U,K as q,a as G,q as Y,l as X,v as Z,aj as J,k as ee,s as te,Y as ae,t as ne,n as oe,aa as se,p as re}from"./index-BmRGUJMw.js";function le(e){var a;const n=t(e);return null!=(a=null==n?void 0:n.$el)?a:n}const ue=r?window:void 0;function ie(...o){let s,r,l,u;if(a(o[0])||Array.isArray(o[0])?([r,l,u]=o,s=ue):[s,r,l,u]=o,!s)return n;Array.isArray(r)||(r=[r]),Array.isArray(l)||(l=[l]);const i=[],c=()=>{i.forEach((e=>e())),i.length=0},d=k((()=>[le(s),t(u)]),(([e,t])=>{c(),e&&i.push(...r.flatMap((a=>l.map((n=>((e,t,a,n)=>(e.addEventListener(t,a,n),()=>e.removeEventListener(t,a,n)))(e,a,n,t))))))}),{immediate:!0,flush:"post"}),p=()=>{d(),c()};return e(p),p}let ce=!1;function de(e,t,a={}){const{window:o=ue,ignore:s=[],capture:r=!0,detectIframe:u=!1}=a;if(!o)return;l&&!ce&&(ce=!0,Array.from(o.document.body.children).forEach((e=>e.addEventListener("click",n))));let i=!0;const c=e=>s.some((t=>{if("string"==typeof t)return Array.from(o.document.querySelectorAll(t)).some((t=>t===e.target||e.composedPath().includes(t)));{const a=le(t);return a&&(e.target===a||e.composedPath().includes(a))}})),d=[ie(o,"click",(a=>{const n=le(e);n&&n!==a.target&&!a.composedPath().includes(n)&&(0===a.detail&&(i=!c(a)),i?t(a):i=!0)}),{passive:!0,capture:r}),ie(o,"pointerdown",(t=>{const a=le(e);a&&(i=!t.composedPath().includes(a)&&!c(t))}),{passive:!0}),u&&ie(o,"blur",(a=>{var n;const s=le(e);"IFRAME"!==(null==(n=o.document.activeElement)?void 0:n.tagName)||(null==s?void 0:s.contains(o.document.activeElement))||t(a)}))].filter(Boolean);return()=>d.forEach((e=>e()))}function pe(e,t=!1){const a=P(),n=()=>a.value=Boolean(e());return n(),o(n,t),a}const fe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};fe.__vueuse_ssr_handlers__=fe.__vueuse_ssr_handlers__||{};var ve=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;function he(t,a,n={}){const o=n,{window:s=ue}=o,r=((e,t)=>{var a={};for(var n in e)me.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&ve)for(var n of ve(e))t.indexOf(n)<0&&ye.call(e,n)&&(a[n]=e[n]);return a})(o,["window"]);let l;const u=pe((()=>s&&"ResizeObserver"in s)),i=()=>{l&&(l.disconnect(),l=void 0)},c=k((()=>le(t)),(e=>{i(),u.value&&s&&e&&(l=new ResizeObserver(a),l.observe(e,r))}),{immediate:!0,flush:"post"}),d=()=>{i(),c()};return e(d),{isSupported:u,stop:d}}var be,ge,we=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;function Oe(t,a,n={}){const o=n,{window:s=ue}=o,r=((e,t)=>{var a={};for(var n in e)xe.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&we)for(var n of we(e))t.indexOf(n)<0&&Ee.call(e,n)&&(a[n]=e[n]);return a})(o,["window"]);let l;const u=pe((()=>s&&"MutationObserver"in s)),i=()=>{l&&(l.disconnect(),l=void 0)},c=k((()=>le(t)),(e=>{i(),u.value&&s&&e&&(l=new MutationObserver(a),l.observe(e,r))}),{immediate:!0}),d=()=>{i(),c()};return e(d),{isSupported:u,stop:d}}(ge=be||(be={})).UP="UP",ge.RIGHT="RIGHT",ge.DOWN="DOWN",ge.LEFT="LEFT",ge.NONE="NONE";var Se=Object.defineProperty,Ie=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,Te=(e,t,a)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;((e,t)=>{for(var a in t||(t={}))ke.call(t,a)&&Te(e,a,t[a]);if(Ie)for(var a of Ie(t))Pe.call(t,a)&&Te(e,a,t[a])})({linear:s},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function Ce(e){return null==e}class Fe extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Le(e,t){throw new Fe(`[${e}] ${t}`)}function Ae(e,t){}let Ne;const _e=e=>{var t;if(!r)return 0;if(void 0!==Ne)return Ne;const a=document.createElement("div");a.className=`${e}-scrollbar__wrap`,a.style.visibility="hidden",a.style.width="100px",a.style.position="absolute",a.style.top="-9999px",document.body.appendChild(a);const n=a.offsetWidth;a.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",a.appendChild(o);const s=o.offsetWidth;return null==(t=a.parentNode)||t.removeChild(a),Ne=n-s,Ne};function Re(e,t){if(!r)return;if(!t)return void(e.scrollTop=0);const a=[];let n=t.offsetParent;for(;null!==n&&e!==n&&e.contains(n);)a.push(n),n=n.offsetParent;const o=t.offsetTop+a.reduce(((e,t)=>e+t.offsetTop),0),s=o+t.offsetHeight,l=e.scrollTop,u=l+e.clientHeight;o<l?e.scrollTop=o:s>u&&(e.scrollTop=s-e.clientHeight)}const ze={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Be="update:modelValue",je="change",$e=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e),Me=e=>e,Ke=["class","style"],He=/^on[A-Z]/;let Ve=[];const De=e=>{const t=e;t.key===ze.esc&&Ve.forEach((e=>e(t)))};function We(e,{afterFocus:t,beforeBlur:a,afterBlur:n}={}){const o=C(),{emit:s}=o,r=A(),l=P(!1);return k(r,(e=>{e&&e.setAttribute("tabindex","-1")})),ie(r,"click",(()=>{var t;null==(t=e.value)||t.focus()})),{wrapperRef:r,isFocused:l,handleFocus:e=>{l.value||(l.value=!0,s("focus",e),null==t||t())},handleBlur:e=>{var t;!!N(a)&&a(e)||e.relatedTarget&&(null==(t=r.value)?void 0:t.contains(e.relatedTarget))||(l.value=!1,s("blur",e),null==n||n())}}}let Qe;const Ue=`\n  height:0 !important;\n  visibility:hidden !important;\n  ${r&&/firefox/i.test(window.navigator.userAgent)?"":"overflow:hidden !important;"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`,qe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Ge(e,t=1,a){var n;Qe||(Qe=document.createElement("textarea"),document.body.appendChild(Qe));const{paddingSize:o,borderSize:s,boxSizing:r,contextStyle:l}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),n=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),o=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:qe.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:n,borderSize:o,boxSizing:a}}(e);Qe.setAttribute("style",`${l};${Ue}`),Qe.value=e.value||e.placeholder||"";let u=Qe.scrollHeight;const c={};"border-box"===r?u+=s:"content-box"===r&&(u-=o),Qe.value="";const d=Qe.scrollHeight-o;if(i(t)){let e=d*t;"border-box"===r&&(e=e+o+s),u=Math.max(e,u),c.minHeight=`${e}px`}if(i(a)){let e=d*a;"border-box"===r&&(e=e+o+s),u=Math.min(e,u)}return c.height=`${u}px`,null==(n=Qe.parentNode)||n.removeChild(Qe),Qe=void 0,c}const Ye=c({id:{type:String,default:void 0},size:d,disabled:Boolean,modelValue:{type:p([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:p([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:f},prefixIcon:{type:f},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:p([Object,Array,String]),default:()=>({})},autofocus:{type:Boolean,default:!1}}),Xe={"update:modelValue":e=>_(e),input:e=>_(e),change:e=>_(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},Ze=["role"],Je=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],et=["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],tt=R({name:"ElInput",inheritAttrs:!1});const at=I(S(R({...tt,props:Ye,emits:Xe,setup(e,{expose:t,emit:a}){const n=e,o=z(),s=B(),l=T((()=>{const e={};return"combobox"===n.containerRole&&(e["aria-haspopup"]=o["aria-haspopup"],e["aria-owns"]=o["aria-owns"],e["aria-expanded"]=o["aria-expanded"]),e})),i=T((()=>["textarea"===n.type?_.b():N.b(),N.m(I.value),N.is("disabled",L.value),N.is("exceed",Fe.value),{[N.b("group")]:s.prepend||s.append,[N.bm("group","append")]:s.append,[N.bm("group","prepend")]:s.prepend,[N.m("prefix")]:s.prefix||n.prefixIcon,[N.m("suffix")]:s.suffix||n.suffixIcon||n.clearable||n.showPassword,[N.bm("suffix","password-clear")]:Ie.value&&ke.value},o.class])),c=T((()=>[N.e("wrapper"),N.is("focus",ve.value)])),d=((e={})=>{const{excludeListeners:t=!1,excludeKeys:a}=e,n=T((()=>((null==a?void 0:a.value)||[]).concat(Ke))),o=C();return T(o?()=>{var e;return u(Object.entries(null==(e=o.proxy)?void 0:e.$attrs).filter((([e])=>!(n.value.includes(e)||t&&He.test(e)))))}:()=>({}))})({excludeKeys:T((()=>Object.keys(l.value)))}),{form:p,formItem:f}=v(),{inputId:S}=m(n,{formItemContext:f}),I=y(),L=h(),N=b("input"),_=b("textarea"),R=A(),re=A(),le=P(!1),ue=P(!1),ie=P(!1),ce=P(),de=A(n.inputStyle),pe=T((()=>R.value||re.value)),{wrapperRef:fe,isFocused:ve,handleFocus:me,handleBlur:ye}=We(pe,{afterBlur(){var e;n.validateEvent&&(null==(e=null==f?void 0:f.validate)||e.call(f,"blur").catch((e=>{})))}}),be=T((()=>{var e;return null!=(e=null==p?void 0:p.statusIcon)&&e})),ge=T((()=>(null==f?void 0:f.validateState)||"")),we=T((()=>ge.value&&g[ge.value])),xe=T((()=>ie.value?w:x)),Ee=T((()=>[o.style])),Oe=T((()=>[n.inputStyle,de.value,{resize:n.resize}])),Se=T((()=>Ce(n.modelValue)?"":String(n.modelValue))),Ie=T((()=>n.clearable&&!L.value&&!n.readonly&&!!Se.value&&(ve.value||le.value))),ke=T((()=>n.showPassword&&!L.value&&!n.readonly&&!!Se.value&&(!!Se.value||ve.value))),Pe=T((()=>n.showWordLimit&&!!n.maxlength&&("text"===n.type||"textarea"===n.type)&&!L.value&&!n.readonly&&!n.showPassword)),Te=T((()=>Se.value.length)),Fe=T((()=>!!Pe.value&&Te.value>Number(n.maxlength))),Le=T((()=>!!s.suffix||!!n.suffixIcon||Ie.value||n.showPassword||Pe.value||!!ge.value&&be.value)),[Ae,Ne]=function(e){const t=P();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:n,value:o}=e.value;if(null==a||null==n)return;const s=o.slice(0,Math.max(0,a)),r=o.slice(Math.max(0,n));t.value={selectionStart:a,selectionEnd:n,value:o,beforeTxt:s,afterTxt:r}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:n,afterTxt:o,selectionStart:s}=t.value;if(null==n||null==o||null==s)return;let r=a.length;if(a.endsWith(o))r=a.length-o.length;else if(a.startsWith(n))r=n.length;else{const e=n[s-1],t=a.indexOf(e,s-1);-1!==t&&(r=t+1)}e.value.setSelectionRange(r,r)}]}(R);he(re,(e=>{if(Re(),!Pe.value||"both"!==n.resize)return;const t=e[0],{width:a}=t.contentRect;ce.value={right:`calc(100% - ${a+15+6}px)`}}));const _e=()=>{const{type:e,autosize:t}=n;if(r&&"textarea"===e&&re.value)if(t){const e=se(t)?t.minRows:void 0,a=se(t)?t.maxRows:void 0,n=Ge(re.value,e,a);de.value={overflowY:"hidden",...n},j((()=>{re.value.offsetHeight,de.value=n}))}else de.value={minHeight:Ge(re.value).minHeight}},Re=(e=>{let t=!1;return()=>{var a;if(t||!n.autosize)return;null===(null==(a=re.value)?void 0:a.offsetParent)||(e(),t=!0)}})(_e),ze=()=>{const e=pe.value,t=n.formatter?n.formatter(Se.value):Se.value;e&&e.value!==t&&(e.value=t)},Be=async e=>{Ae();let{value:t}=e.target;n.formatter&&(t=n.parser?n.parser(t):t),ue.value||(t!==Se.value?(a("update:modelValue",t),a("input",t),await j(),ze(),Ne()):ze())},je=e=>{a("change",e.target.value)},Me=e=>{a("compositionstart",e),ue.value=!0},Ve=e=>{var t;a("compositionupdate",e);const n=null==(t=e.target)?void 0:t.value,o=n[n.length-1]||"";ue.value=!$e(o)},De=e=>{a("compositionend",e),ue.value&&(ue.value=!1,Be(e))},Qe=()=>{ie.value=!ie.value,Ue()},Ue=async()=>{var e;await j(),null==(e=pe.value)||e.focus()},qe=e=>{le.value=!1,a("mouseleave",e)},Ye=e=>{le.value=!0,a("mouseenter",e)},Xe=e=>{a("keydown",e)},tt=()=>{a("update:modelValue",""),a("change",""),a("clear"),a("input","")};return k((()=>n.modelValue),(()=>{var e;j((()=>_e())),n.validateEvent&&(null==(e=null==f?void 0:f.validate)||e.call(f,"change").catch((e=>{})))})),k(Se,(()=>ze())),k((()=>n.type),(async()=>{await j(),ze(),_e()})),F((()=>{!n.formatter&&n.parser,ze(),j(_e)})),t({input:R,textarea:re,ref:pe,textareaStyle:Oe,autosize:$(n,"autosize"),focus:Ue,blur:()=>{var e;return null==(e=pe.value)?void 0:e.blur()},select:()=>{var e;null==(e=pe.value)||e.select()},clear:tt,resizeTextarea:_e}),(e,t)=>M((H(),V("div",J(U(l),{class:U(i),style:U(Ee),role:e.containerRole,onMouseenter:Ye,onMouseleave:qe}),[D(" input "),"textarea"!==e.type?(H(),V(W,{key:0},[D(" prepend slot "),e.$slots.prepend?(H(),V("div",{key:0,class:Q(U(N).be("group","prepend"))},[q(e.$slots,"prepend")],2)):D("v-if",!0),G("div",{ref_key:"wrapperRef",ref:fe,class:Q(U(c))},[D(" prefix slot "),e.$slots.prefix||e.prefixIcon?(H(),V("span",{key:0,class:Q(U(N).e("prefix"))},[G("span",{class:Q(U(N).e("prefix-inner"))},[q(e.$slots,"prefix"),e.prefixIcon?(H(),Y(U(E),{key:0,class:Q(U(N).e("icon"))},{default:X((()=>[(H(),Y(Z(e.prefixIcon)))])),_:1},8,["class"])):D("v-if",!0)],2)],2)):D("v-if",!0),G("input",J({id:U(S),ref_key:"input",ref:R,class:U(N).e("inner")},U(d),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?ie.value?"text":"password":e.type,disabled:U(L),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,onCompositionstart:Me,onCompositionupdate:Ve,onCompositionend:De,onInput:Be,onFocus:t[0]||(t[0]=(...e)=>U(me)&&U(me)(...e)),onBlur:t[1]||(t[1]=(...e)=>U(ye)&&U(ye)(...e)),onChange:je,onKeydown:Xe}),null,16,Je),D(" suffix slot "),U(Le)?(H(),V("span",{key:1,class:Q(U(N).e("suffix"))},[G("span",{class:Q(U(N).e("suffix-inner"))},[U(Ie)&&U(ke)&&U(Pe)?D("v-if",!0):(H(),V(W,{key:0},[q(e.$slots,"suffix"),e.suffixIcon?(H(),Y(U(E),{key:0,class:Q(U(N).e("icon"))},{default:X((()=>[(H(),Y(Z(e.suffixIcon)))])),_:1},8,["class"])):D("v-if",!0)],64)),U(Ie)?(H(),Y(U(E),{key:1,class:Q([U(N).e("icon"),U(N).e("clear")]),onMousedown:te(U(ae),["prevent"]),onClick:tt},{default:X((()=>[ee(U(O))])),_:1},8,["class","onMousedown"])):D("v-if",!0),U(ke)?(H(),Y(U(E),{key:2,class:Q([U(N).e("icon"),U(N).e("password")]),onClick:Qe},{default:X((()=>[(H(),Y(Z(U(xe))))])),_:1},8,["class"])):D("v-if",!0),U(Pe)?(H(),V("span",{key:3,class:Q(U(N).e("count"))},[G("span",{class:Q(U(N).e("count-inner"))},ne(U(Te))+" / "+ne(e.maxlength),3)],2)):D("v-if",!0),U(ge)&&U(we)&&U(be)?(H(),Y(U(E),{key:4,class:Q([U(N).e("icon"),U(N).e("validateIcon"),U(N).is("loading","validating"===U(ge))])},{default:X((()=>[(H(),Y(Z(U(we))))])),_:1},8,["class"])):D("v-if",!0)],2)],2)):D("v-if",!0)],2),D(" append slot "),e.$slots.append?(H(),V("div",{key:1,class:Q(U(N).be("group","append"))},[q(e.$slots,"append")],2)):D("v-if",!0)],64)):(H(),V(W,{key:1},[D(" textarea "),G("textarea",J({id:U(S),ref_key:"textarea",ref:re,class:U(_).e("inner")},U(d),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:U(L),readonly:e.readonly,autocomplete:e.autocomplete,style:U(Oe),"aria-label":e.label,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,onCompositionstart:Me,onCompositionupdate:Ve,onCompositionend:De,onInput:Be,onFocus:t[2]||(t[2]=(...e)=>U(me)&&U(me)(...e)),onBlur:t[3]||(t[3]=(...e)=>U(ye)&&U(ye)(...e)),onChange:je,onKeydown:Xe}),null,16,et),U(Pe)?(H(),V("span",{key:0,style:oe(ce.value),class:Q(U(N).e("count"))},ne(U(Te))+" / "+ne(e.maxlength),7)):D("v-if",!0)],64))],16,Ze)),[[K,"hidden"!==e.type]])}}),[["__file","input.vue"]])),nt={cancelable:!0,bubbles:!1},ot={cancelable:!0,bubbles:!1},st=Symbol("elFocusTrap"),rt=P(),lt=P(0),ut=P(0);let it=0;const ct=e=>{const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0||e===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t},dt=(e,t)=>{for(const a of e)if(!pt(a,t))return a},pt=(e,t)=>{if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1},ft=(e,t)=>{if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),ut.value=window.performance.now(),e!==a&&(e=>e instanceof HTMLInputElement&&"select"in e)(e)&&t&&e.select()}};function vt(e,t){const a=[...e],n=e.indexOf(t);return-1!==n&&a.splice(n,1),a}const mt=(()=>{let e=[];return{push:t=>{const a=e[0];a&&t!==a&&a.pause(),e=vt(e,t),e.unshift(t)},remove:t=>{var a,n;e=vt(e,t),null==(n=null==(a=e[0])?void 0:a.resume)||n.call(a)}}})(),yt=()=>{rt.value="pointer",lt.value=window.performance.now()},ht=()=>{rt.value="keyboard",lt.value=window.performance.now()},bt=e=>new CustomEvent("focus-trap.focusout-prevented",{...ot,detail:e});var gt=S(R({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:["focusAfterTrapped","focusAfterReleased","focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const a=P();let n,o;const{focusReason:s}=(F((()=>{0===it&&(document.addEventListener("mousedown",yt),document.addEventListener("touchstart",yt),document.addEventListener("keydown",ht)),it++})),L((()=>{it--,it<=0&&(document.removeEventListener("mousedown",yt),document.removeEventListener("touchstart",yt),document.removeEventListener("keydown",ht))})),{focusReason:rt,lastUserFocusTimestamp:lt,lastAutomatedFocusTimestamp:ut});var l;l=a=>{e.trapped&&!u.paused&&t("release-requested",a)},F((()=>{0===Ve.length&&document.addEventListener("keydown",De),r&&Ve.push(l)})),L((()=>{Ve=Ve.filter((e=>e!==l)),0===Ve.length&&r&&document.removeEventListener("keydown",De)}));const u={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},i=a=>{if(!e.loop&&!e.trapped)return;if(u.paused)return;const{key:n,altKey:o,ctrlKey:r,metaKey:l,currentTarget:i,shiftKey:c}=a,{loop:d}=e,p=n===ze.tab&&!o&&!r&&!l,f=document.activeElement;if(p&&f){const e=i,[n,o]=(e=>{const t=ct(e);return[dt(t,e),dt(t.reverse(),e)]})(e);if(n&&o)if(c||f!==o){if(c&&[n,e].includes(f)){const e=bt({focusReason:s.value});t("focusout-prevented",e),e.defaultPrevented||(a.preventDefault(),d&&ft(o,!0))}}else{const e=bt({focusReason:s.value});t("focusout-prevented",e),e.defaultPrevented||(a.preventDefault(),d&&ft(n,!0))}else if(f===e){const e=bt({focusReason:s.value});t("focusout-prevented",e),e.defaultPrevented||a.preventDefault()}}};re(st,{focusTrapRef:a,onKeydown:i}),k((()=>e.focusTrapEl),(e=>{e&&(a.value=e)}),{immediate:!0}),k([a],(([e],[t])=>{e&&(e.addEventListener("keydown",i),e.addEventListener("focusin",p),e.addEventListener("focusout",f)),t&&(t.removeEventListener("keydown",i),t.removeEventListener("focusin",p),t.removeEventListener("focusout",f))}));const c=e=>{t("focusAfterTrapped",e)},d=e=>t("focusAfterReleased",e),p=s=>{const r=U(a);if(!r)return;const l=s.target,i=s.relatedTarget,c=l&&r.contains(l);if(!e.trapped){i&&r.contains(i)||(n=i)}c&&t("focusin",s),u.paused||e.trapped&&(c?o=l:ft(o,!0))},f=n=>{const r=U(a);if(!u.paused&&r)if(e.trapped){const a=n.relatedTarget;Ce(a)||r.contains(a)||setTimeout((()=>{if(!u.paused&&e.trapped){const e=bt({focusReason:s.value});t("focusout-prevented",e),e.defaultPrevented||ft(o,!0)}}),0)}else{const e=n.target;e&&r.contains(e)||t("focusout",n)}};async function v(){await j();const t=U(a);if(t){mt.push(u);const a=t.contains(document.activeElement)?n:document.activeElement;n=a;if(!t.contains(a)){const n=new Event("focus-trap.focus-after-trapped",nt);t.addEventListener("focus-trap.focus-after-trapped",c),t.dispatchEvent(n),n.defaultPrevented||j((()=>{let n=e.focusStartEl;_(n)||(ft(n),document.activeElement!==n&&(n="first")),"first"===n&&((e,t=!1)=>{const a=document.activeElement;for(const n of e)if(ft(n,t),document.activeElement!==a)return})(ct(t),!0),document.activeElement!==a&&"container"!==n||ft(t)}))}}}function m(){const e=U(a);if(e){e.removeEventListener("focus-trap.focus-after-trapped",c);const t=new CustomEvent("focus-trap.focus-after-released",{...nt,detail:{focusReason:s.value}});e.addEventListener("focus-trap.focus-after-released",d),e.dispatchEvent(t),t.defaultPrevented||"keyboard"!=s.value&&lt.value>ut.value&&!e.contains(document.activeElement)||ft(null!=n?n:document.body),e.removeEventListener("focus-trap.focus-after-released",d),mt.remove(u)}}return F((()=>{e.trapped&&v(),k((()=>e.trapped),(e=>{e?v():m()}))})),L((()=>{e.trapped&&m()})),{onKeydown:i}}}),[["render",function(e,t,a,n,o,s){return q(e.$slots,"default",{handleKeydown:e.onKeydown})}],["__file","focus-trap.vue"]]);export{je as C,at as E,Be as U,ze as a,he as b,gt as c,le as d,$e as e,We as f,_e as g,Ae as h,Ce as i,Oe as j,Me as m,de as o,Re as s,Le as t,ie as u};
